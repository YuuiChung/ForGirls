<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping package="cn.it.shop.model">
    <class name="Role" table="role" catalog="shop">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="native"></generator>
        </id>
        <property name="name" type="java.lang.String">
            <column name="name" length="20" />
        </property>
        <property name="detail" type="java.lang.String">
            <column name="detail" length="200" />
        </property>
        <!-- 配置角色与权限的关联, 双方是多对多的关系 
        	 多对多查询流程: 先到指定的table: privilege_role 通过自己的 id匹配 rid
        	 然后通过 rid去找到相应的 pid <column name="pid" />
        	 pid 在去匹配 Privilege表的 id
        	
           	在多对一 更新的时:外键就在本身表, 可以通过此方式  student.setGrade(new Grade(1)); 不用配置: cascade="all"
                                   在多对多时：外键在中间表,此时中间表的维护是由它自身相应主表,也不是用配置cascade="all", 如果配置则会更新 Privilege
        -->
        <set name="privilegeSet" table="privilege_role">
            <!-- key代表是外键,其它表的字段 -->
        	<key>
        		<column name="rid" />
        	</key>
        	<many-to-many class="Privilege">
        		<column name="pid" />
        	</many-to-many>
        </set>
    </class>
</hibernate-mapping>
